import { QueryObserver } from '@tanstack/query-core';
import { assertInjector } from './util/assert-injector/assert-injector';
import { createBaseQuery } from './create-base-query';
/**
 * Injects a query: a declarative dependency on an asynchronous source of data that is tied to a unique key.
 *
 * **Basic example**
 * ```ts
 * class ServiceOrComponent {
 *   query = injectQuery(() => ({
 *     queryKey: ['repoData'],
 *     queryFn: () =>
 *       this.#http.get<Response>('https://api.github.com/repos/tanstack/query'),
 *   }))
 * }
 * ```
 *
 * Similar to `computed` from Angular, the function passed to `injectQuery` will be run in the reactive context.
 * In the example below, the query will be automatically enabled and executed when the filter signal changes
 * to a truthy value. When the filter signal changes back to a falsy value, the query will be disabled.
 *
 * **Reactive example**
 * ```ts
 * class ServiceOrComponent {
 *   filter = signal('')
 *
 *   todosQuery = injectQuery(() => ({
 *     queryKey: ['todos', this.filter()],
 *     queryFn: () => fetchTodos(this.filter()),
 *     // Signals can be combined with expressions
 *     enabled: !!this.filter(),
 *   }))
 * }
 * ```
 * @param optionsFn - A function that returns query options.
 * @param injector - The Angular injector to use.
 * @returns The query result.
 * @public
 * @see https://tanstack.com/query/latest/docs/framework/angular/guides/queries
 */
export function injectQuery(optionsFn, injector) {
    return assertInjector(injectQuery, injector, () => createBaseQuery(optionsFn, QueryObserver));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5qZWN0LXF1ZXJ5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2luamVjdC1xdWVyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sc0JBQXNCLENBQUE7QUFDcEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHdDQUF3QyxDQUFBO0FBQ3ZFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQTtBQWdLckQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW9DRztBQUNILE1BQU0sVUFBVSxXQUFXLENBQ3pCLFNBQXNELEVBQ3RELFFBQW1CO0lBRW5CLE9BQU8sY0FBYyxDQUFDLFdBQVcsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQ2hELGVBQWUsQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLENBQzFDLENBQUE7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUXVlcnlPYnNlcnZlciB9IGZyb20gJ0B0YW5zdGFjay9xdWVyeS1jb3JlJ1xuaW1wb3J0IHsgYXNzZXJ0SW5qZWN0b3IgfSBmcm9tICcuL3V0aWwvYXNzZXJ0LWluamVjdG9yL2Fzc2VydC1pbmplY3RvcidcbmltcG9ydCB7IGNyZWF0ZUJhc2VRdWVyeSB9IGZyb20gJy4vY3JlYXRlLWJhc2UtcXVlcnknXG5pbXBvcnQgdHlwZSB7IEluamVjdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB0eXBlIHsgRGVmYXVsdEVycm9yLCBRdWVyeUNsaWVudCwgUXVlcnlLZXkgfSBmcm9tICdAdGFuc3RhY2svcXVlcnktY29yZSdcbmltcG9ydCB0eXBlIHtcbiAgQ3JlYXRlUXVlcnlPcHRpb25zLFxuICBDcmVhdGVRdWVyeVJlc3VsdCxcbiAgRGVmaW5lZENyZWF0ZVF1ZXJ5UmVzdWx0LFxufSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHR5cGUge1xuICBEZWZpbmVkSW5pdGlhbERhdGFPcHRpb25zLFxuICBVbmRlZmluZWRJbml0aWFsRGF0YU9wdGlvbnMsXG59IGZyb20gJy4vcXVlcnktb3B0aW9ucydcblxuLyoqXG4gKiBJbmplY3RzIGEgcXVlcnk6IGEgZGVjbGFyYXRpdmUgZGVwZW5kZW5jeSBvbiBhbiBhc3luY2hyb25vdXMgc291cmNlIG9mIGRhdGEgdGhhdCBpcyB0aWVkIHRvIGEgdW5pcXVlIGtleS5cbiAqXG4gKiAqKkJhc2ljIGV4YW1wbGUqKlxuICogYGBgdHNcbiAqIGNsYXNzIFNlcnZpY2VPckNvbXBvbmVudCB7XG4gKiAgIHF1ZXJ5ID0gaW5qZWN0UXVlcnkoKCkgPT4gKHtcbiAqICAgICBxdWVyeUtleTogWydyZXBvRGF0YSddLFxuICogICAgIHF1ZXJ5Rm46ICgpID0+XG4gKiAgICAgICB0aGlzLiNodHRwLmdldDxSZXNwb25zZT4oJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvdGFuc3RhY2svcXVlcnknKSxcbiAqICAgfSkpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBTaW1pbGFyIHRvIGBjb21wdXRlZGAgZnJvbSBBbmd1bGFyLCB0aGUgZnVuY3Rpb24gcGFzc2VkIHRvIGBpbmplY3RRdWVyeWAgd2lsbCBiZSBydW4gaW4gdGhlIHJlYWN0aXZlIGNvbnRleHQuXG4gKiBJbiB0aGUgZXhhbXBsZSBiZWxvdywgdGhlIHF1ZXJ5IHdpbGwgYmUgYXV0b21hdGljYWxseSBlbmFibGVkIGFuZCBleGVjdXRlZCB3aGVuIHRoZSBmaWx0ZXIgc2lnbmFsIGNoYW5nZXNcbiAqIHRvIGEgdHJ1dGh5IHZhbHVlLiBXaGVuIHRoZSBmaWx0ZXIgc2lnbmFsIGNoYW5nZXMgYmFjayB0byBhIGZhbHN5IHZhbHVlLCB0aGUgcXVlcnkgd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiAqKlJlYWN0aXZlIGV4YW1wbGUqKlxuICogYGBgdHNcbiAqIGNsYXNzIFNlcnZpY2VPckNvbXBvbmVudCB7XG4gKiAgIGZpbHRlciA9IHNpZ25hbCgnJylcbiAqXG4gKiAgIHRvZG9zUXVlcnkgPSBpbmplY3RRdWVyeSgoKSA9PiAoe1xuICogICAgIHF1ZXJ5S2V5OiBbJ3RvZG9zJywgdGhpcy5maWx0ZXIoKV0sXG4gKiAgICAgcXVlcnlGbjogKCkgPT4gZmV0Y2hUb2Rvcyh0aGlzLmZpbHRlcigpKSxcbiAqICAgICAvLyBTaWduYWxzIGNhbiBiZSBjb21iaW5lZCB3aXRoIGV4cHJlc3Npb25zXG4gKiAgICAgZW5hYmxlZDogISF0aGlzLmZpbHRlcigpLFxuICogICB9KSlcbiAqIH1cbiAqIGBgYFxuICogQHBhcmFtIG9wdGlvbnNGbiAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHF1ZXJ5IG9wdGlvbnMuXG4gKiBAcGFyYW0gaW5qZWN0b3IgLSBUaGUgQW5ndWxhciBpbmplY3RvciB0byB1c2UuXG4gKiBAcmV0dXJucyBUaGUgcXVlcnkgcmVzdWx0LlxuICogQHB1YmxpY1xuICogQHNlZSBodHRwczovL3RhbnN0YWNrLmNvbS9xdWVyeS9sYXRlc3QvZG9jcy9mcmFtZXdvcmsvYW5ndWxhci9ndWlkZXMvcXVlcmllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0UXVlcnk8XG4gIFRRdWVyeUZuRGF0YSA9IHVua25vd24sXG4gIFRFcnJvciA9IERlZmF1bHRFcnJvcixcbiAgVERhdGEgPSBUUXVlcnlGbkRhdGEsXG4gIFRRdWVyeUtleSBleHRlbmRzIFF1ZXJ5S2V5ID0gUXVlcnlLZXksXG4+KFxuICBvcHRpb25zRm46IChcbiAgICBjbGllbnQ6IFF1ZXJ5Q2xpZW50LFxuICApID0+IERlZmluZWRJbml0aWFsRGF0YU9wdGlvbnM8VFF1ZXJ5Rm5EYXRhLCBURXJyb3IsIFREYXRhLCBUUXVlcnlLZXk+LFxuICBpbmplY3Rvcj86IEluamVjdG9yLFxuKTogRGVmaW5lZENyZWF0ZVF1ZXJ5UmVzdWx0PFREYXRhLCBURXJyb3I+XG5cbi8qKlxuICogSW5qZWN0cyBhIHF1ZXJ5OiBhIGRlY2xhcmF0aXZlIGRlcGVuZGVuY3kgb24gYW4gYXN5bmNocm9ub3VzIHNvdXJjZSBvZiBkYXRhIHRoYXQgaXMgdGllZCB0byBhIHVuaXF1ZSBrZXkuXG4gKlxuICogKipCYXNpYyBleGFtcGxlKipcbiAqIGBgYHRzXG4gKiBjbGFzcyBTZXJ2aWNlT3JDb21wb25lbnQge1xuICogICBxdWVyeSA9IGluamVjdFF1ZXJ5KCgpID0+ICh7XG4gKiAgICAgcXVlcnlLZXk6IFsncmVwb0RhdGEnXSxcbiAqICAgICBxdWVyeUZuOiAoKSA9PlxuICogICAgICAgdGhpcy4jaHR0cC5nZXQ8UmVzcG9uc2U+KCdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3RhbnN0YWNrL3F1ZXJ5JyksXG4gKiAgIH0pKVxuICogfVxuICogYGBgXG4gKlxuICogU2ltaWxhciB0byBgY29tcHV0ZWRgIGZyb20gQW5ndWxhciwgdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBgaW5qZWN0UXVlcnlgIHdpbGwgYmUgcnVuIGluIHRoZSByZWFjdGl2ZSBjb250ZXh0LlxuICogSW4gdGhlIGV4YW1wbGUgYmVsb3csIHRoZSBxdWVyeSB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZW5hYmxlZCBhbmQgZXhlY3V0ZWQgd2hlbiB0aGUgZmlsdGVyIHNpZ25hbCBjaGFuZ2VzXG4gKiB0byBhIHRydXRoeSB2YWx1ZS4gV2hlbiB0aGUgZmlsdGVyIHNpZ25hbCBjaGFuZ2VzIGJhY2sgdG8gYSBmYWxzeSB2YWx1ZSwgdGhlIHF1ZXJ5IHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogKipSZWFjdGl2ZSBleGFtcGxlKipcbiAqIGBgYHRzXG4gKiBjbGFzcyBTZXJ2aWNlT3JDb21wb25lbnQge1xuICogICBmaWx0ZXIgPSBzaWduYWwoJycpXG4gKlxuICogICB0b2Rvc1F1ZXJ5ID0gaW5qZWN0UXVlcnkoKCkgPT4gKHtcbiAqICAgICBxdWVyeUtleTogWyd0b2RvcycsIHRoaXMuZmlsdGVyKCldLFxuICogICAgIHF1ZXJ5Rm46ICgpID0+IGZldGNoVG9kb3ModGhpcy5maWx0ZXIoKSksXG4gKiAgICAgLy8gU2lnbmFscyBjYW4gYmUgY29tYmluZWQgd2l0aCBleHByZXNzaW9uc1xuICogICAgIGVuYWJsZWQ6ICEhdGhpcy5maWx0ZXIoKSxcbiAqICAgfSkpXG4gKiB9XG4gKiBgYGBcbiAqIEBwYXJhbSBvcHRpb25zRm4gLSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBxdWVyeSBvcHRpb25zLlxuICogQHBhcmFtIGluamVjdG9yIC0gVGhlIEFuZ3VsYXIgaW5qZWN0b3IgdG8gdXNlLlxuICogQHJldHVybnMgVGhlIHF1ZXJ5IHJlc3VsdC5cbiAqIEBwdWJsaWNcbiAqIEBzZWUgaHR0cHM6Ly90YW5zdGFjay5jb20vcXVlcnkvbGF0ZXN0L2RvY3MvZnJhbWV3b3JrL2FuZ3VsYXIvZ3VpZGVzL3F1ZXJpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluamVjdFF1ZXJ5PFxuICBUUXVlcnlGbkRhdGEgPSB1bmtub3duLFxuICBURXJyb3IgPSBEZWZhdWx0RXJyb3IsXG4gIFREYXRhID0gVFF1ZXJ5Rm5EYXRhLFxuICBUUXVlcnlLZXkgZXh0ZW5kcyBRdWVyeUtleSA9IFF1ZXJ5S2V5LFxuPihcbiAgb3B0aW9uc0ZuOiAoXG4gICAgY2xpZW50OiBRdWVyeUNsaWVudCxcbiAgKSA9PiBVbmRlZmluZWRJbml0aWFsRGF0YU9wdGlvbnM8VFF1ZXJ5Rm5EYXRhLCBURXJyb3IsIFREYXRhLCBUUXVlcnlLZXk+LFxuICBpbmplY3Rvcj86IEluamVjdG9yLFxuKTogQ3JlYXRlUXVlcnlSZXN1bHQ8VERhdGEsIFRFcnJvcj5cblxuLyoqXG4gKiBJbmplY3RzIGEgcXVlcnk6IGEgZGVjbGFyYXRpdmUgZGVwZW5kZW5jeSBvbiBhbiBhc3luY2hyb25vdXMgc291cmNlIG9mIGRhdGEgdGhhdCBpcyB0aWVkIHRvIGEgdW5pcXVlIGtleS5cbiAqXG4gKiAqKkJhc2ljIGV4YW1wbGUqKlxuICogYGBgdHNcbiAqIGNsYXNzIFNlcnZpY2VPckNvbXBvbmVudCB7XG4gKiAgIHF1ZXJ5ID0gaW5qZWN0UXVlcnkoKCkgPT4gKHtcbiAqICAgICBxdWVyeUtleTogWydyZXBvRGF0YSddLFxuICogICAgIHF1ZXJ5Rm46ICgpID0+XG4gKiAgICAgICB0aGlzLiNodHRwLmdldDxSZXNwb25zZT4oJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvdGFuc3RhY2svcXVlcnknKSxcbiAqICAgfSkpXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBTaW1pbGFyIHRvIGBjb21wdXRlZGAgZnJvbSBBbmd1bGFyLCB0aGUgZnVuY3Rpb24gcGFzc2VkIHRvIGBpbmplY3RRdWVyeWAgd2lsbCBiZSBydW4gaW4gdGhlIHJlYWN0aXZlIGNvbnRleHQuXG4gKiBJbiB0aGUgZXhhbXBsZSBiZWxvdywgdGhlIHF1ZXJ5IHdpbGwgYmUgYXV0b21hdGljYWxseSBlbmFibGVkIGFuZCBleGVjdXRlZCB3aGVuIHRoZSBmaWx0ZXIgc2lnbmFsIGNoYW5nZXNcbiAqIHRvIGEgdHJ1dGh5IHZhbHVlLiBXaGVuIHRoZSBmaWx0ZXIgc2lnbmFsIGNoYW5nZXMgYmFjayB0byBhIGZhbHN5IHZhbHVlLCB0aGUgcXVlcnkgd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiAqKlJlYWN0aXZlIGV4YW1wbGUqKlxuICogYGBgdHNcbiAqIGNsYXNzIFNlcnZpY2VPckNvbXBvbmVudCB7XG4gKiAgIGZpbHRlciA9IHNpZ25hbCgnJylcbiAqXG4gKiAgIHRvZG9zUXVlcnkgPSBpbmplY3RRdWVyeSgoKSA9PiAoe1xuICogICAgIHF1ZXJ5S2V5OiBbJ3RvZG9zJywgdGhpcy5maWx0ZXIoKV0sXG4gKiAgICAgcXVlcnlGbjogKCkgPT4gZmV0Y2hUb2Rvcyh0aGlzLmZpbHRlcigpKSxcbiAqICAgICAvLyBTaWduYWxzIGNhbiBiZSBjb21iaW5lZCB3aXRoIGV4cHJlc3Npb25zXG4gKiAgICAgZW5hYmxlZDogISF0aGlzLmZpbHRlcigpLFxuICogICB9KSlcbiAqIH1cbiAqIGBgYFxuICogQHBhcmFtIG9wdGlvbnNGbiAtIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHF1ZXJ5IG9wdGlvbnMuXG4gKiBAcGFyYW0gaW5qZWN0b3IgLSBUaGUgQW5ndWxhciBpbmplY3RvciB0byB1c2UuXG4gKiBAcmV0dXJucyBUaGUgcXVlcnkgcmVzdWx0LlxuICogQHB1YmxpY1xuICogQHNlZSBodHRwczovL3RhbnN0YWNrLmNvbS9xdWVyeS9sYXRlc3QvZG9jcy9mcmFtZXdvcmsvYW5ndWxhci9ndWlkZXMvcXVlcmllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0UXVlcnk8XG4gIFRRdWVyeUZuRGF0YSA9IHVua25vd24sXG4gIFRFcnJvciA9IERlZmF1bHRFcnJvcixcbiAgVERhdGEgPSBUUXVlcnlGbkRhdGEsXG4gIFRRdWVyeUtleSBleHRlbmRzIFF1ZXJ5S2V5ID0gUXVlcnlLZXksXG4+KFxuICBvcHRpb25zRm46IChcbiAgICBjbGllbnQ6IFF1ZXJ5Q2xpZW50LFxuICApID0+IENyZWF0ZVF1ZXJ5T3B0aW9uczxUUXVlcnlGbkRhdGEsIFRFcnJvciwgVERhdGEsIFRRdWVyeUtleT4sXG4gIGluamVjdG9yPzogSW5qZWN0b3IsXG4pOiBDcmVhdGVRdWVyeVJlc3VsdDxURGF0YSwgVEVycm9yPlxuXG4vKipcbiAqIEluamVjdHMgYSBxdWVyeTogYSBkZWNsYXJhdGl2ZSBkZXBlbmRlbmN5IG9uIGFuIGFzeW5jaHJvbm91cyBzb3VyY2Ugb2YgZGF0YSB0aGF0IGlzIHRpZWQgdG8gYSB1bmlxdWUga2V5LlxuICpcbiAqICoqQmFzaWMgZXhhbXBsZSoqXG4gKiBgYGB0c1xuICogY2xhc3MgU2VydmljZU9yQ29tcG9uZW50IHtcbiAqICAgcXVlcnkgPSBpbmplY3RRdWVyeSgoKSA9PiAoe1xuICogICAgIHF1ZXJ5S2V5OiBbJ3JlcG9EYXRhJ10sXG4gKiAgICAgcXVlcnlGbjogKCkgPT5cbiAqICAgICAgIHRoaXMuI2h0dHAuZ2V0PFJlc3BvbnNlPignaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy90YW5zdGFjay9xdWVyeScpLFxuICogICB9KSlcbiAqIH1cbiAqIGBgYFxuICpcbiAqIFNpbWlsYXIgdG8gYGNvbXB1dGVkYCBmcm9tIEFuZ3VsYXIsIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYGluamVjdFF1ZXJ5YCB3aWxsIGJlIHJ1biBpbiB0aGUgcmVhY3RpdmUgY29udGV4dC5cbiAqIEluIHRoZSBleGFtcGxlIGJlbG93LCB0aGUgcXVlcnkgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGVuYWJsZWQgYW5kIGV4ZWN1dGVkIHdoZW4gdGhlIGZpbHRlciBzaWduYWwgY2hhbmdlc1xuICogdG8gYSB0cnV0aHkgdmFsdWUuIFdoZW4gdGhlIGZpbHRlciBzaWduYWwgY2hhbmdlcyBiYWNrIHRvIGEgZmFsc3kgdmFsdWUsIHRoZSBxdWVyeSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqICoqUmVhY3RpdmUgZXhhbXBsZSoqXG4gKiBgYGB0c1xuICogY2xhc3MgU2VydmljZU9yQ29tcG9uZW50IHtcbiAqICAgZmlsdGVyID0gc2lnbmFsKCcnKVxuICpcbiAqICAgdG9kb3NRdWVyeSA9IGluamVjdFF1ZXJ5KCgpID0+ICh7XG4gKiAgICAgcXVlcnlLZXk6IFsndG9kb3MnLCB0aGlzLmZpbHRlcigpXSxcbiAqICAgICBxdWVyeUZuOiAoKSA9PiBmZXRjaFRvZG9zKHRoaXMuZmlsdGVyKCkpLFxuICogICAgIC8vIFNpZ25hbHMgY2FuIGJlIGNvbWJpbmVkIHdpdGggZXhwcmVzc2lvbnNcbiAqICAgICBlbmFibGVkOiAhIXRoaXMuZmlsdGVyKCksXG4gKiAgIH0pKVxuICogfVxuICogYGBgXG4gKiBAcGFyYW0gb3B0aW9uc0ZuIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgcXVlcnkgb3B0aW9ucy5cbiAqIEBwYXJhbSBpbmplY3RvciAtIFRoZSBBbmd1bGFyIGluamVjdG9yIHRvIHVzZS5cbiAqIEByZXR1cm5zIFRoZSBxdWVyeSByZXN1bHQuXG4gKiBAcHVibGljXG4gKiBAc2VlIGh0dHBzOi8vdGFuc3RhY2suY29tL3F1ZXJ5L2xhdGVzdC9kb2NzL2ZyYW1ld29yay9hbmd1bGFyL2d1aWRlcy9xdWVyaWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmplY3RRdWVyeShcbiAgb3B0aW9uc0ZuOiAoY2xpZW50OiBRdWVyeUNsaWVudCkgPT4gQ3JlYXRlUXVlcnlPcHRpb25zLFxuICBpbmplY3Rvcj86IEluamVjdG9yLFxuKSB7XG4gIHJldHVybiBhc3NlcnRJbmplY3RvcihpbmplY3RRdWVyeSwgaW5qZWN0b3IsICgpID0+XG4gICAgY3JlYXRlQmFzZVF1ZXJ5KG9wdGlvbnNGbiwgUXVlcnlPYnNlcnZlciksXG4gIClcbn1cbiJdfQ==