import { Injector, computed, inject, untracked } from '@angular/core';
export function lazySignalInitializer(initializerFn) {
    const injector = inject(Injector);
    let source = null;
    const unwrapSignal = () => {
        if (!source) {
            source = untracked(() => initializerFn(injector));
        }
        return source();
    };
    queueMicrotask(() => unwrapSignal());
    return computed(unwrapSignal);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF6eS1zaWduYWwtaW5pdGlhbGl6ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvdXRpbC9sYXp5LXNpZ25hbC1pbml0aWFsaXplci9sYXp5LXNpZ25hbC1pbml0aWFsaXplci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBS3JFLE1BQU0sVUFBVSxxQkFBcUIsQ0FDbkMsYUFBcUM7SUFFckMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBRWpDLElBQUksTUFBTSxHQUFxQixJQUFJLENBQUE7SUFFbkMsTUFBTSxZQUFZLEdBQUcsR0FBRyxFQUFFO1FBQ3hCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNaLE1BQU0sR0FBRyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUE7UUFDbkQsQ0FBQztRQUNELE9BQU8sTUFBTSxFQUFFLENBQUE7SUFDakIsQ0FBQyxDQUFBO0lBRUQsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUE7SUFFcEMsT0FBTyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUE7QUFDL0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdG9yLCBjb21wdXRlZCwgaW5qZWN0LCB1bnRyYWNrZWQgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuaW1wb3J0IHR5cGUgeyBTaWduYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJ1xuXG50eXBlIFNpZ25hbEluaXRpYWxpemVyRm48VD4gPSAoaW5qZWN0b3I6IEluamVjdG9yKSA9PiBTaWduYWw8VD5cblxuZXhwb3J0IGZ1bmN0aW9uIGxhenlTaWduYWxJbml0aWFsaXplcjxUPihcbiAgaW5pdGlhbGl6ZXJGbjogU2lnbmFsSW5pdGlhbGl6ZXJGbjxUPixcbikge1xuICBjb25zdCBpbmplY3RvciA9IGluamVjdChJbmplY3RvcilcblxuICBsZXQgc291cmNlOiBTaWduYWw8VD4gfCBudWxsID0gbnVsbFxuXG4gIGNvbnN0IHVud3JhcFNpZ25hbCA9ICgpID0+IHtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgc291cmNlID0gdW50cmFja2VkKCgpID0+IGluaXRpYWxpemVyRm4oaW5qZWN0b3IpKVxuICAgIH1cbiAgICByZXR1cm4gc291cmNlKClcbiAgfVxuXG4gIHF1ZXVlTWljcm90YXNrKCgpID0+IHVud3JhcFNpZ25hbCgpKVxuXG4gIHJldHVybiBjb21wdXRlZCh1bndyYXBTaWduYWwpXG59XG4iXX0=